@import '../../../../shared/styles/form-table-mixins.scss';

.api-tracking-container {
    padding: 20px;
    background-color: var(--color-background);
    color: var(--color-text);
    min-height: 100vh;

    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;

        h2 {
            margin: 0;
            color: var(--color-text);
            font-weight: 500;
        }

        .header-actions {
            display: flex;
            gap: 10px;

            mat-icon {
                margin-right: 5px;
            }
        }
    }

    mat-tab-group {
        background-color: var(--color-surface);
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

        // Dark theme support for tab group
        body.dark-theme & {
            background-color: var(--color-surface);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
    }

    .tab-content {
        padding: 20px;
    }

    .filters-card {
        margin-bottom: 20px;
        @include card-container;

        .filter-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;

            mat-form-field {
                @include form-field-base;

                body.dark-theme & {
                    @include form-field-dark;
                }
            }
        }
    }

    .metrics-card,
    .model-details {
        margin-bottom: 20px;
        @include card-container;
    }

    .loading-card {
        margin-bottom: 20px;
        @include loading-state;
    }

    .metrics-grid {
        @include metrics-grid;
        margin-bottom: 30px;

        .metric {
            @include metric-card;

            .metric-label {
                @include metric-label;
            }

            .metric-value {
                @include metric-value;

                &.success,
                &.error {
                    @include cell-status('error');
                }

                &.success {
                    @include cell-status('success');
                }
            }
        }
    }

    .status-codes {
        @include card-container;
        padding: 20px;

        h3 {
            margin-top: 0;
            margin-bottom: 16px;
            color: var(--color-text);
        }

        .status-grid {
            @include status-grid;

            .status-item {
                mat-chip {
                    width: 100%;
                    display: flex;
                    justify-content: center;
                }
            }
        }
    }

    .table-container {
        overflow-x: auto;
        margin-bottom: 16px;
    }

    .analytics-table {
        @include table-base;

        body.dark-theme & {
            @include table-dark;
        }

        th {
            @media (max-width: 768px) {
                font-size: var(--font-size-xs);
                padding: 8px;
            }
        }

        td {
            code {
                font-family: var(--font-mono);
                font-size: var(--font-size-xs);
            }

            mat-chip {
                font-size: var(--font-size-xs);

                &.success,
                &.warning,
                &.error,
                &.info {
                    @include status-chip('error');
                }

                &.success {
                    @include status-chip('success');
                }

                &.warning {
                    @include status-chip('warning');
                }

                &.error {
                    @include status-chip('error');
                }

                &.info {
                    @include status-chip('info');
                }
            }

            &.success,
            &.error,
            &.warning,
            &.info {
                @include cell-status('error');
            }

            &.success {
                @include cell-status('success');
            }

            &.error {
                @include cell-status('error');
            }

            &.warning {
                @include cell-status('warning');
            }

            &.info {
                @include cell-status('info');
            }
        }

        @media (max-width: 768px) {
            td {
                padding: 8px;
                font-size: var(--font-size-sm);
            }
        }
    }

    .divider {
        margin: 20px 0;
    }

    .details-grid {
        @include details-grid;

        .detail-item {
            @include card-container;
            display: flex;
            justify-content: space-between;
            flex-direction: column;
            gap: 8px;

            .detail-label {
                font-weight: 600;
                color: var(--color-text-secondary);
            }

            .detail-value {
                color: var(--color-text);
                font-weight: 600;

                &.success {
                    @include cell-status('success');
                }

                &.error {
                    @include cell-status('error');
                }

                &.warning {
                    @include cell-status('warning');
                }

                &.info {
                    @include cell-status('info');
                }
            }
        }
    }

    .empty-state {
        @include empty-state;
    }

    // Responsive Design
    @media (max-width: 768px) {
        padding: var(--spacing-md);

        .header {
            flex-direction: column;
            gap: 16px;
            align-items: flex-start;

            h2 {
                font-size: var(--font-size-lg);
            }

            .header-actions {
                width: 100%;
                flex-wrap: wrap;

                button {
                    flex: 1;
                    min-width: 150px;
                }
            }
        }

        .tab-content {
            padding: var(--spacing-md);
        }

        .metrics-grid {
            grid-template-columns: 1fr;
        }

        .status-codes .status-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .details-grid {
            grid-template-columns: 1fr;
        }
    }
}