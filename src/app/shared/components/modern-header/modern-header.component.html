<mat-toolbar color="primary" class="modern-header" [attr.data-header-theme]="currentHeaderTheme()">
    <div class="toolbar-start">
        <button mat-icon-button (click)="onMenuToggle()" class="menu-button" matTooltip="Toggle menu">
            <mat-icon class="menu-icon">menu</mat-icon>
        </button>
        <div class="toolbar-title">
            <div class="app-branding">
                <div class="app-icon-container">
                    <mat-icon class="app-icon">{{ headerIcon() }}</mat-icon>
                </div>
                <div class="app-text">
                    <h1 class="app-name">{{ headerTitle() }}</h1>
                    <span class="app-description">AI-Powered Form Builder</span>
                </div>
            </div>
        </div>
    </div>

    <span class="spacer"></span>

    <div class="toolbar-end">
        <!-- Header Theme Selector -->
        <button mat-icon-button [matMenuTriggerFor]="headerThemeMenu" class="theme-selector-btn"
            matTooltip="Header Theme">
            <mat-icon>palette</mat-icon>
        </button>
        <mat-menu #headerThemeMenu="matMenu" class="header-theme-menu">
            <button mat-menu-item *ngFor="let theme of availableHeaderThemes()" (click)="setHeaderTheme(theme)"
                [class.active]="currentHeaderTheme() === theme">
                <span>{{ getThemeLabel(theme) }}</span>
            </button>
        </mat-menu>

        <!-- Dark/Light Theme Toggle -->
        <button mat-icon-button (click)="onThemeToggle()" class="theme-toggle" matTooltip="Toggle dark/light">
            <mat-icon class="theme-icon">{{ isDarkTheme() ? 'light_mode' : 'dark_mode' }}</mat-icon>
        </button>

        <!-- User Menu -->
        <button mat-icon-button [matMenuTriggerFor]="menu" class="user-menu" matTooltip="Menu">
            <mat-icon class="menu-icon">account_circle</mat-icon>
        </button>
    </div>

    <mat-menu #menu="matMenu" class="app-menu">
        <button mat-menu-item class="menu-header">
            <span>Settings & Help</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item routerLink="/settings">
            <mat-icon>settings</mat-icon>
            <span>Settings</span>
        </button>
        <button mat-menu-item>
            <mat-icon>help_outline</mat-icon>
            <span>Help & Support</span>
        </button>
        <button mat-menu-item>
            <mat-icon>info_outline</mat-icon>
            <span>About</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item class="danger">
            <mat-icon>logout</mat-icon>
            <span>Logout</span>
        </button>
    </mat-menu>
</mat-toolbar>